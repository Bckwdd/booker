# üé´ Event Booking Service API

RESTful API —Å–µ—Ä–≤—ñ—Å –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ–π —Ç–∞ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –º—ñ—Å—Ü—å. –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ **Django REST Framework**.


## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

* **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:** –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –≤—Ö—ñ–¥ (JWT Token).
* **–ü–æ–¥—ñ—ó (Events):** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ–π, –ø–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É –∑ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–º –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º –≤—ñ–ª—å–Ω–∏—Ö –º—ñ—Å—Ü—å.
* **–ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è (Booking):**
    * –ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –º—ñ—Å—Ü—å –Ω–∞ –ø–æ–¥—ñ—é.
    * –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è.
* **–û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç:** –ü–µ—Ä–µ–≥–ª—è–¥ –≤–ª–∞—Å–Ω–∏—Ö —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –ø–æ–¥—ñ–π —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—ó –±—Ä–æ–Ω—é–≤–∞–Ω—å.

## üì° API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (Swagger UI) –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–æ—é: üëâ http://127.0.0.1:8000/api/docs/

**Base URL:** `/api/v1/`

–£—Å—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (üîí) –ø–æ–≤–∏–Ω–Ω—ñ –º—ñ—Å—Ç–∏—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
`Authorization: Bearer <your_access_token>`

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (Users)

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É (JSON) | –û–ø–∏—Å |
| :--- | :--- | :--- | :--- |
| `POST` | `/users/register/` | `{"email": "...", "username": "...", "password": "..."}` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| `POST` | `/users/login/` | `{"email": "...", "password": "..."}` | –í—Ö—ñ–¥. –ü–æ–≤–µ—Ä—Ç–∞—î `access` —Ç–∞ `refresh` —Ç–æ–∫–µ–Ω–∏ |

### üìÖ –ü–æ–¥—ñ—ó (Events)

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É / –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ | –û–ø–∏—Å |
| :--- | :--- | :--- | :--- |
| `GET` | `/events/` | ‚Äî | üîí –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –ø–æ–¥—ñ–π (–≤–∫–ª—é—á–∞—î –ø–æ–ª–µ `seats_taken`) |
| `POST` | `/events/` | `{"title": "...", "datetime": "...", "max_seats": 10}` | üîí –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –ø–æ–¥—ñ—é |
| `POST` | `/events/{id}/book/` | `{"seats_booked": 1}` | üîí **–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏ –º—ñ—Å—Ü–µ**.  |

### üë§ –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç (My Dashboard)

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –û–ø–∏—Å |
| :--- | :--- | :--- |
| `GET` | `/my/events/` | üîí –°–ø–∏—Å–æ–∫ –ø–æ–¥—ñ–π, —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –ø–æ—Ç–æ—á–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º |
| `GET` | `/my/bookings/` | üîí –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö –±—Ä–æ–Ω—é–≤–∞–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∑ –¥–µ—Ç–∞–ª—è–º–∏ –ø–æ–¥—ñ—ó) |

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –û–ø–∏—Å |
| :--- | :--- | :--- |
| `GET` | `/api/docs/` | –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è **Swagger UI** |
| `GET` | `/api/schema/` | –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ö–µ–º—É OpenAPI (YAML) |

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

* **Python 3.12+**
* **Django 5.x** & **Django REST Framework**
* **PostgreSQL** (–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö)
* **SimpleJWT** (–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è)
* **drf-spectacular** (OpenAPI 3.0 / Swagger)
* **python-decouple** (–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏–º–∏ –æ—Ç–æ—á–µ–Ω–Ω—è)
* **Ruff** (–õ—ñ–Ω—Ç–µ—Ä —Ç–∞ —Ñ–æ—Ä–º–∞—Ç–µ—Ä)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```text
.
‚îú‚îÄ‚îÄ docker-compose.yml          # –§–∞–π–ª –∑–∞–ø—É—Å–∫—É (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑ example)
‚îú‚îÄ‚îÄ postgresql-db               # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ data                    # –î–∞–Ω—ñ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ .pg-env                 # –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –¥–ª—è Postgres
‚îî‚îÄ‚îÄ src                         # –í–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥
    ‚îú‚îÄ‚îÄ api                     # –ö–æ–Ω—Ñ—ñ–≥ Django
    ‚îú‚îÄ‚îÄ events                  # –ê–ø–∫–∞ –ø–æ–¥—ñ–π —Ç–∞ –±—Ä–æ–Ω—é–≤–∞–Ω—å
    ‚îú‚îÄ‚îÄ users                   # –ê–ø–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îú‚îÄ‚îÄ docker-compose-example.yml
    ‚îú‚îÄ‚îÄ .env                    # –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–∞
    ‚îú‚îÄ‚îÄ manage.py
    ‚îî‚îÄ‚îÄ ...
```

## ‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone <your-repo-url>
cd booker
```
–£–≤–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç—É –ø–æ–≤–∏–Ω–µ–Ω –ª–µ–∂–∞—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `./src`

### 2. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–∞–∑–∏ –î–∞–Ω–∏—Ö
–£ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞–ø–∫—É `postgresql-db`, –∞ –≤ –Ω—ñ–π –ø–∞–ø–∫—É `data` —Ç–∞ —Ñ–∞–π–ª `.pg-env`.

```bash
mkdir -p postgresql-db/data
```
–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `postgresql-db/.pg-env` —ñ –¥–æ–¥–∞–π—Ç–µ —Ç—É–¥–∏:

```toml
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=eventsdb
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è (.env)
–ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –ø–∞–ø–∫—É `src` —Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–∏–∫–ª–∞–¥ `.env-example` (—è–∫—â–æ –≤—ñ–Ω —î) –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π.

```ini
DEBUG=True
SECRET_KEY=change-me-in-production

# Database (DB_HOST –º–∞—î —Å–ø—ñ–≤–ø–∞–¥–∞—Ç–∏ –∑ –Ω–∞–∑–≤–æ—é —Å–µ—Ä–≤—ñ—Å—É –≤ docker-compose)
DB_HOST=booker-db
DB_PORT=5432
DB_NAME=eventsdb
DB_USER=postgres
DB_PASSWORD=password

# JWT Settings
JWT_ACCESS_MINUTES=60
JWT_REFRESH_DAYS=7
```

### 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è docker-compose.yml

–£ –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó (–Ω–∞–¥ –ø–∞–ø–∫–æ—é `src`) —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `docker-compose.yml`, —Å–∫–æ–ø—ñ—é–≤–∞–≤—à–∏ –π–æ–≥–æ –∑ –ø—Ä–∏–∫–ª–∞–¥—É:
```bash
cp src/docker-compose-example.yml docker-compose.yml
```

### 5. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
–ü–æ—Ä—É—á –∑ `docker-compose.yml` –≤–≤–µ–¥—ñ—Ç—å:

```Bash
docker-compose up --build -d
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –Ø–∫—ñ—Å—Ç—å –∫–æ–¥—É

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)

```bash
docker-compose exec booker-web python manage.py test
```

## –õ—ñ–Ω—Ç–µ—Ä (Ruff)
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É:

```bash
docker-compose exec booker-web ruff check .
```
